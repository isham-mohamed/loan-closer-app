<div class="container">
  <!-- Header -->
  <header class="header">
    <div class="header-content">
      <div class="header-top">
        <h1>üí∞ Loan Calculator</h1>
        <button
          class="theme-toggle"
          (click)="toggleTheme()"
          [title]="isDarkMode ? 'Switch to Light Mode' : 'Switch to Dark Mode'"
        >
          {{ isDarkMode ? '‚òÄÔ∏è' : 'üåô' }}
        </button>
      </div>
      <p>Calculate EMI, interest, and view amortization schedule</p>
    </div>
  </header>

  <!-- Main Content -->
  <div class="main-content">
    <!-- Left Panel: Form -->
    <div class="form-panel">
      <div class="form-section">
        <h2>Loan Details</h2>

        <div class="form-group">
          <label>Principal Amount</label>
          <div class="input-wrapper">
            <span class="currency">‚Çπ</span>
            <input
              type="text"
              [value]="principalDisplay"
              (input)="onPrincipalChange($event)"
              placeholder="Enter loan amount"
            />
          </div>
        </div>

        <div class="form-group">
          <label>Annual Interest Rate</label>
          <div class="input-wrapper">
            <input type="number" [(ngModel)]="annualRate" placeholder="e.g. 7.5" step="0.01" />
            <span class="unit">%</span>
          </div>
        </div>

        <div class="tenure-group">
          <div class="form-group">
            <label>Tenure (Years)</label>
            <div class="input-wrapper">
              <input type="number" [(ngModel)]="tenureYears" placeholder="e.g. 10" />
              <span class="unit">yr</span>
            </div>
          </div>
          <div class="form-group">
            <label>Or (Months)</label>
            <div class="input-wrapper">
              <input type="number" [(ngModel)]="tenureMonths" placeholder="e.g. 120" />
              <span class="unit">mo</span>
            </div>
          </div>
        </div>

        <div class="form-actions">
          <button class="btn btn-primary" (click)="calculate()">Calculate</button>
          <button class="btn btn-secondary" (click)="resetAll()">Reset</button>
        </div>
      </div>

      <!-- Results Summary Card -->
      <div class="results-card" *ngIf="emi > 0">
        <h3>Summary</h3>
        <div class="result-item">
          <span class="label">Monthly EMI</span>
          <span class="value">‚Çπ {{ formatMoney(emi) }}</span>
        </div>
        <div class="result-item">
          <span class="label">Total Interest</span>
          <span class="value highlight">‚Çπ {{ formatMoney(totalInterest) }}</span>
        </div>
        <div class="result-item">
          <span class="label">Total Payable</span>
          <span class="value">‚Çπ {{ formatMoney(totalPayable) }}</span>
        </div>
      </div>
    </div>

    <!-- Right Panel: Table -->
    <div class="table-panel" *ngIf="schedule.length">
      <div class="table-header">
        <h2>Amortization Schedule</h2>
        <span class="row-count">{{ schedule.length }} months</span>
      </div>
      <div class="table-container">
        <table class="amortization-table">
          <thead>
            <tr>
              <th>Month</th>
              <th>Opening Balance</th>
              <th>EMI</th>
              <th>Interest</th>
              <th>Principal</th>
              <th>Closing Balance</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let row of schedule; let i = index" [class.alternate]="i % 2 === 1">
              <td class="month-col">{{ row.month }}</td>
              <td class="number">{{ formatMoney(row.opening) }}</td>
              <td class="number">{{ formatMoney(row.emi) }}</td>
              <td class="number interest">{{ formatMoney(row.interest) }}</td>
              <td class="number principal">{{ formatMoney(row.principal) }}</td>
              <td class="number">{{ formatMoney(row.closing) }}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
