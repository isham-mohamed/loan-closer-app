<div class="card">
  <h2>Loan Calculator</h2>

  <div class="form-row">
    <label>Loan amount (principal)</label>
    <input type="number" [(ngModel)]="principal" placeholder="e.g. 500000" />
  </div>

  <div class="form-row">
    <label>Annual interest rate (%)</label>
    <input type="number" [(ngModel)]="annualRate" placeholder="e.g. 7.5" step="0.01" />
  </div>

  <div class="form-row split">
    <div>
      <label>Tenure (years)</label>
      <input type="number" [(ngModel)]="tenureYears" placeholder="e.g. 10" />
    </div>
    <div>
      <label>Or tenure (months)</label>
      <input type="number" [(ngModel)]="tenureMonths" placeholder="e.g. 120" />
    </div>
  </div>

  <div class="actions">
    <button (click)="calculate()">Calculate</button>
    <button (click)="resetAll()" class="secondary">Reset</button>
  </div>

  <div class="results" *ngIf="emi > 0">
    <p><strong>Monthly EMI:</strong> {{ formatMoney(emi) }}</p>
    <p><strong>Total interest:</strong> {{ formatMoney(totalInterest) }}</p>
    <p><strong>Total payable:</strong> {{ formatMoney(totalPayable) }}</p>
  </div>

  <div class="schedule" *ngIf="schedule.length">
    <h3>Amortization Schedule</h3>
    <div class="table-wrap">
      <table>
        <thead>
          <tr>
            <th>Month</th>
            <th>Opening</th>
            <th>EMI</th>
            <th>Interest</th>
            <th>Principal</th>
            <th>Closing</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let row of schedule">
            <td>{{ row.month }}</td>
            <td>{{ formatMoney(row.opening) }}</td>
            <td>{{ formatMoney(row.emi) }}</td>
            <td>{{ formatMoney(row.interest) }}</td>
            <td>{{ formatMoney(row.principal) }}</td>
            <td>{{ formatMoney(row.closing) }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
